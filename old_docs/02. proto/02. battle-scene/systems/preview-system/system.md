# 프리뷰 시스템

## 개요

스킬/카드 사용 전 효과를 미리 보여주는 시스템

## 프리뷰 종류

| 타입 | 트리거 | 대상 |
|------|--------|------|
| 데미지 프리뷰 | 공격 스킬 호버/드래그 | 적 HP바 |
| 블록 프리뷰 | 방어 스킬 호버/드래그 | 플레이어 방패 |
| 힐 프리뷰 | 힐 스킬 호버/드래그 | 플레이어 HP바 |

---

## 트리거 조건

### 스킬 프리뷰

| 조건 | 프리뷰 활성화 |
|------|---------------|
| 스킬 슬롯 호버 | O |
| 스킬 사용 불가 (코인 부족) | X |
| 쿨다운 중 | X |

### 카드 프리뷰

| 조건 | 프리뷰 활성화 |
|------|---------------|
| 카드 드래그 + 유효 영역 | O |
| 카드 내부 홀드 | X |

---

## 효과 계산

### 데미지

```
실제 데미지 = max(0, 스킬/카드 데미지 - 적 방어력)
```

### 블록

```
프리뷰 방어력 = 현재 방어력 + 스킬/카드 방어력
```

### 힐

```
프리뷰 HP = min(최대 HP, 현재 HP + 힐량)
```

---

## 상태 관리

### 프리뷰 상태

```typescript
interface PreviewState {
  type: 'damage' | 'block' | 'heal' | null;
  value: number;
  source: 'skill' | 'card';
  targetId?: string;
}
```

### 상태 전환

```
없음 → 호버/드래그 → 프리뷰 표시
프리뷰 표시 → 호버 해제/드롭 → 프리뷰 해제
```

---

## 관련 문서

- [프리뷰 UI](./ui.md) - 시각적 표현
- [프리뷰 애니메이션](./animation.md) - 전환 효과
- [스킬 시스템](../skill-system/system.md) - 스킬 효과 계산
- [카드 프리뷰 (레거시)](../card-preview.md) - 기존 카드 드래그 프리뷰
