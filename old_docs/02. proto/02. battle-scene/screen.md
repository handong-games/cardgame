# 배틀씬 (BattleScreen)

> 전투 화면 레이아웃 및 컴포넌트 정의

---

## 레이아웃 구조

```
┌─────────────────────────────────────────────────────────┐
│  【 전투 영역 】                                         │
│                                        [다음 액션]      │
│   ○ 방패 ┌─ HP 바 ─┐          ○ 방패 ┌─ HP 바 ─┐      │
│   ┌─────────────────┐          ┌─────────────────┐      │
│   │    카드 이름    │          │    카드 이름    │      │
│   │                 │          │                 │      │
│   │   유저 캐릭터   │          │    적 캐릭터    │      │
│   │     이미지      │          │      이미지     │      │
│   │                 │          │                 │      │
│   └─────────────────┘          └─────────────────┘      │
│                                                         │
├─────────────────────────────────────────────────────────┤
│  【 플레이어 영역 】                                     │
│  ○ 에너지                                      ○ 다음턴 │
│                    ┌────┐ ┌────┐ ┌────┐                 │
│  ○ 덱             │카드│ │카드│ │카드│                  │
│                    └────┘ └────┘ └────┘                 │
│                       (부채꼴 손패)                      │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 영역 정의

| 영역 | 명칭 | 설명 |
|------|------|------|
| 상단 | 전투 영역 | 캐릭터들이 전투하는 공간 |
| 하단 | 플레이어 영역 | 손패/에너지/덱이 있는 조작 영역 |

---

## 캐릭터 카드 컴포넌트

### 구조

```
○ 방패  ┌────────────────────┐
        │      HP 바         │
        └────────────────────┘
┌────────────────────────────┐
│         카드 이름          │
├────────────────────────────┤
│                            │
│       캐릭터 이미지        │
│                            │
└────────────────────────────┘
```

### 방패 아이콘

좌상단에 위치, HP 바와 나란히 배치

| 상태 | 배경색 | 테두리 | 내용 |
|------|--------|--------|------|
| 방어력 0 | gray-700 | gray-600 | 🛡️ 이모지 |
| 방어력 1+ | blue-600 | blue-400 | 수치 표시 |

방어력이 1 이상일 때:
- 원 안에 방어력 수치 표시
- 우상단에 작은 방패 이모지 오버레이

```
┌─────┐
│ 15  │ ← 방어력 수치
└─────┘
     🛡️ ← 작은 방패 아이콘 (우상단)
```

### HP 바

방패 아이콘 오른쪽에 위치

| 요소 | 설명 |
|------|------|
| 배경 | gray-700 |
| 유저 HP | green-500 |
| 적 HP | red-500 |
| 텍스트 | 현재HP / 최대HP |

```
┌──────────────────────────┐
│████████████░░░░░  30/50  │
└──────────────────────────┘
```

### 카드 본체

| 영역 | 설명 |
|------|------|
| 카드 이름 | 상단, 중앙 정렬, 흰색 볼드 |
| 캐릭터 이미지 | 중앙, 이모지 또는 이미지 |

---

## 유저 vs 적 캐릭터

| 구분 | 유저 | 적 |
|------|------|-----|
| 위치 | 좌측 | 우측 |
| HP 바 색상 | green-500 | red-500 |
| 방패 표시 | 있음 | 있음 |
| 카드 테두리 | gray-700 | purple-500 |
| 다음 액션 | 없음 | HP 바 위에 표시 |

### 정렬
- 두 캐릭터 카드는 **전투 영역 중앙 정렬** (`items-center`)
- 유저 캐릭터 위에 스페이서 추가하여 적의 "다음 액션" 높이 보정
- 카드 본체가 수평으로 일치

---

## 적 다음 액션 표시

HP 바 위에 위치, 적의 다음 턴 행동을 미리 표시

```
┌─────────────────────────┐
│ ⚔️ 공격 8              │
└─────────────────────────┘
```

| 액션 타입 | 아이콘 | 라벨 |
|----------|--------|------|
| attack | ⚔️ | 공격 |
| defend | 🛡️ | 방어 |
| buff | ✨ | 강화 |

- 배경: gray-800
- 수치: yellow-400, 볼드

---

## 하단 UI

### 에너지 (좌상단)
- 형태: 원형
- 표시: 현재/최대
- 색상: yellow-500

### 덱 (좌하단)
- 형태: 원형
- 표시: 남은 카드 수
- 색상: white

### 손패 (중앙)
- 배열: 부채꼴 형태
- 호버 시: scale-105, 위로 이동, 회전 초기화

### 다음턴 버튼 (우측)
- 형태: 원형
- 활성: blue-600 (플레이어 턴)
- 비활성: gray-600 (적 턴, 애니메이션 중)

---

## 손패 카드 컴포넌트

```
┌──────────────┐
│  카드 이름   │
│              │
│    유저      │
│  카드 인물   │
│   이미지     │
│              │
└──────────────┘
```

- 부채꼴 배열: 중앙 카드가 위로, 양 끝이 아래로
- 호버 시: scale-105, 위로 이동

---

## 상태별 화면

### 승리
- 중앙: `승리!` 메시지 (green-500)
- 하단: `다시 시작` 버튼

### 패배
- 중앙: `패배...` 메시지 (red-500)
- 하단: `다시 시작` 버튼

---

## 라운드 진행 표시기 (RoundProgress)

화면 우측에 수직으로 표시되는 라운드 진행 상태 표시기

```
            ☠️  ← 보스 (라운드 7)
             |
             ○  ← 잠김 (라운드 6)
             |
             ○  ← 잠김 (라운드 5)
             |
            🏘️  ← 마을 (라운드 4)
             |
             ◉  ← 현재 (라운드 3)
             |
             ●  ← 지남 (라운드 2)
             |
             ●  ← 지남 (라운드 1)

           3/7
        잊혀진 숲  ← 현재 지역명
```

### 상태별 스타일

| 상태 | 크기 | 스타일 |
|------|------|--------|
| passed (지나간) | `w-3 h-3` | 채워진 흰색 원 |
| current (현재) | `w-5 h-5` | 선홍색 테두리 + 내부 점 |
| locked (잠긴) | `w-3 h-3` | 회색 빈 원 |

### 특수 라운드 아이콘

| 라운드 | 아이콘 | 설명 |
|:------:|:------:|------|
| 중간점 (4) | 🏘️ | 마을 |
| 마지막 (7) | ☠️ | 보스 |

### 트랙 연결선

| 상태 | 스타일 |
|------|--------|
| passed | 흰색 (`bg-white`) |
| current | 그라데이션 (`from-rose-500 to-gray-600`) |
| locked | 회색 (`bg-gray-600`) |

---

## 행선지 선택 화면 (destination_selection)

전투 보상 선택 후 다음 행선지를 선택하는 화면

```
┌─────────────────────────────────────────────────┐
│                                          ☠️ 7  │
│                                           |    │
│   ┌─────────┐  ┌─────────┐  ┌─────────┐   ○ 6  │
│   │  몬스터  │  │  휴식   │  │ 엘리트  │   |    │
│   │    👹    │  │   🏕️   │  │   💀    │   ○ 5  │
│   └─────────┘  └─────────┘  └─────────┘   |    │
│                                          🏘️ 4  │
│                                           |    │
│                                           ◉ 3  │
└─────────────────────────────────────────────────┘
```

### 행선지 카드 (DestinationCard)

| 요소 | 설명 |
|------|------|
| 상단 | 타입 라벨 (몬스터, 휴식 등) |
| 중앙 | 타입 이모지 |
| 테두리 | 타입별 색상 |

### 행선지 타입별 스타일

| 타입 | 이모지 | 라벨 | 테두리 색상 |
|------|:------:|------|------------|
| `normal` | 👹 | 몬스터 | gray-500 |
| `elite` | 💀 | 엘리트 | yellow-500 |
| `rest` | 🏕️ | 휴식 | green-500 |
| `shop` | 🛒 | 상점 | blue-500 |
| `event` | ❓ | 이벤트 | purple-500 |

### 애니메이션

| 효과 | 설정 |
|------|------|
| 등장 | `opacity: 0→1`, `y: 20→0`, `scale: 0.9→1` |
| 순차 지연 | `delay: index * 0.1` |
| 호버 | `scale: 1.05`, `duration: 0.05` |

---

## 관련 문서

- [행선지 시스템](./systems/destination-system.md)
- [지역 시스템](./systems/region-system.md)
