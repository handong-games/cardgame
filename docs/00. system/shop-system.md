# 상점 시스템 기획서

> **작성일:** 2026-02-10
> **상태:** 기획

---

## Part 1: 왜 만드는가 (Why)

### 1.1 기획 배경

스킬 획득이 몬스터 처치 보상에만 의존하면 원하는 전략을 구상하기 어렵다. 상점을 통해 플레이어가 원하는 스킬에 더 가까이 접근할 수 있게 하여 전략 실현을 돕는다. 또한 전투만 반복되면 지루해질 수 있으므로, 상점이 분위기 전환 역할도 한다.

### 1.2 해결할 문제

| 문제 | 현재 상황 | 해결 방향 | 예시 |
|------|----------|----------|------|
| **전략 실현 불가** | 보상 스킬이 랜덤이라 원하는 빌드를 구성하기 어려움 | 상점에서 원하는 스킬을 직접 구매 (영혼 소비) | 앞면 위주 빌드를 구상 중인데 보상에서 뒷면 스킬만 나옴 → 상점에서 "강타(앞면2)"를 발견하고 구매하여 빌드 완성 |
| **전투 반복의 단조로움** | 전투만 계속되면 플레이 리듬이 단조로움 | 상점 방문으로 분위기 전환 | 3연속 전투 후 상점 행선지 등장 → 전투 긴장에서 벗어나 여유롭게 스킬을 둘러보는 시간 |

### 1.3 기대 효과 & 리스크

| 구분 | 내용 | 예시 |
|------|------|------|
| **기대 효과** | 원하는 스킬을 직접 선택하여 전략 실현 가능 | 뒷면 위주 도적 빌드인데 "독 연쇄(뒷면2)"가 상점에 있음 → 구매로 콤보 완성 |
| **기대 효과** | 영혼 관리라는 새로운 판단 축 추가 | "지금 강타를 살까, 아니면 다음 상점에서 더 좋은 스킬이 나올 걸 기대하고 영혼을 아낄까?" |
| **기대 효과** | 전투 사이 분위기 전환으로 플레이 리듬 조절 | 보스전 직전 상점에서 빌드를 점검하고 부족한 부분을 보강하는 준비 시간 |
| **기대 효과** | 스킬 슬롯 확장 구매로 성장 경로 다양화 | 영혼을 스킬 구매에 쓸지, 슬롯 확장에 투자할지 선택 |
| **리스크** | 상점 스킬이 너무 좋으면 전투 보상의 가치 하락 | 상점에서 항상 최적 스킬을 살 수 있다면 전투 보상 스킬을 건너뛰기만 함 |
| **리스크** | 영혼이 부족하면 상점이 구경만 하는 공간 | 영혼 30개인데 스킬 가격이 80 → 아무것도 못 사고 나옴 |
| **리스크** | 상점 상품이 매번 비슷하면 방문 동기 감소 | 세 번째 상점 방문인데 첫 번째와 같은 스킬만 나옴 → "또 이거야" |
| **리스크** | 상점 의존도가 높아져 상점을 못 만나면 불만 | 상점 등장이 15% 확률인데 한 번도 못 만남 → "운이 나빠서 빌드를 못 만들었어" |
| **리스크** | 상점에서 너무 오래 고민하면 게임 템포 저하 | 스킬 10개를 하나하나 비교하느라 5분 소요 → 전투 리듬이 끊김 |

---

## Part 2: 무엇을 만드는가 (What)

### 2.1 한 줄 정의

> 상점 시스템은 **영혼을 소비한 전략적 구매**를 담당하며, **스킬/슬롯 직접 선택**을 통해 **원하는 빌드를 실현하는 성장 경험**을 제공한다.

### 2.2 감정 설계

| 순간 | 목표 감정 | 예시 |
|------|----------|------|
| 상점 입장 | **안도 + 기대** | 3연전 후 상점 도착 - "드디어 쉬면서 둘러볼 수 있다" |
| 상품 둘러보기 | **탐색의 즐거움** | 스킬 5개를 하나씩 확인하며 "이건 내 빌드에 맞을까?" 비교 |
| 원하는 스킬 발견 | **발견의 흥분** | 앞면 위주 빌드에 딱 맞는 "연속 베기(앞면2)"를 발견 - "이거다!" |
| 구매 결정 | **전략적 만족** | 영혼 80을 투자해 스킬 구매 - "이걸로 보스전 준비 완료" |
| 영혼 부족 | **아쉬움 + 동기 부여** | 원하는 스킬이 있는데 영혼 20 부족 - "다음에 꼭 사야지, 영혼 더 모으자" |
| 슬롯 확장 구매 | **성장의 쾌감** | 영혼 100으로 5번째 슬롯 해금 - "이제 스킬 하나 더 넣을 수 있다" |
| 상점 퇴장 | **준비된 자신감** | 빌드를 보강하고 나가며 - "이제 다음 전투 갈 준비됐다" |

### 2.3 시스템 구조

```
상점 행선지 선택 (행선지에서 상점 선택)
    |
[상점 입장] 상점 UI 표시
    |
[상품 확인] 스킬 5개 + 전리품 3개 + 슬롯 확장 표시
    |        각 상품에 가격(영혼), 상세 정보 표시
    |
[구매 분기]
    ├─ 스킬 우클릭 → 구매 확인 팝업 → 수락 → 슬롯 배치 (보상과 동일)
    ├─ 스킬 드래그 → 슬롯에 배치 (보상과 동일)
    ├─ 전리품 구매 → 즉시 획득
    ├─ 슬롯 확장 구매 → 빈 슬롯 추가
    └─ 구매 없이 나가기
    |
[복수 구매] 영혼 충분하면 추가 구매 가능
    |
[상점 퇴장] 다음 행선지 선택으로 진행
```

### 2.4 핵심 규칙

| 규칙 | 내용 | 예외 | 예시 |
|------|------|------|------|
| **상점 등장** | 행선지에서만 등장 (15% 확률, 라운드 2 이상) | 마을에는 상점 없음 | 라운드 3 행선지 선택 시 상점이 등장 |
| **상품 구성** | 스킬 5개 + 전리품 3개 + 슬롯 확장 진열 | - | 한 화면에 스킬, 전리품, 슬롯 확장이 모두 표시 |
| **상품 갱신** | 방문할 때마다 새로운 스킬/전리품 생성 | - | 첫 상점에서 "강타" → 두 번째 상점에서는 다른 스킬 구성 |
| **가격** | 스킬별, 전리품별로 가격이 다름 | 슬롯 확장은 고정 가격 | "강타" 60영혼, "분노 방어" 80영혼, "이끼 낀 부적" 50영혼 |
| **복수 구매** | 영혼이 충분하면 여러 개 구매 가능 | - | 영혼 200으로 스킬 2개 + 전리품 1개 구매 |
| **구매 확인** | 우클릭 시 구매 확인 팝업 → 수락 시 획득 | - | "강타를 60 영혼에 구매하시겠습니까?" |
| **스킬 배치** | 보상 시스템과 동일 (드래그/우클릭, 교체 확인 팝업) | - | 구매한 스킬을 빈 슬롯에 드래그 → 배치 |
| **스킬 풀** | 보상과 동일 규칙 (클래스 + 공용, 코인 수 기반, 중복 불가) | - | 이미 보유한 스킬은 상점에 나오지 않음 |
| **슬롯 확장** | 고정 가격, 최대 6개까지 | 이미 6개면 표시 안 됨 | 슬롯 4→5 확장을 100 영혼에 구매 |

### 2.5 주요 수치 기준

| 항목 | 기준값 | 범위 | 비고 |
|------|--------|------|------|
| 스킬 진열 수 | 5개 | - | - |
| 전리품 진열 수 | 3개 | - | - |
| 스킬 가격 | 미정 | 스킬별 차등 | 추후 밸런싱 |
| 전리품 가격 | 미정 | 전리품별 차등 | 추후 밸런싱 |
| 슬롯 확장 가격 | 미정 | 고정 | 추후 밸런싱 |
| 상점 등장 확률 | 15% | - | 라운드 2 이상 |

---

## Part 3: 어떻게 확인하는가 (Verify)

### 3.1 관련 시스템

| 시스템 | 관계 | 영향 |
|--------|------|------|
| **보상 시스템** | 연동 | 영혼 획득 경로 제공, 스킬 중복 불가 규칙 공유 |
| **스킬 시스템** | 핵심 연동 | 스킬 풀 제공, 슬롯 배치/교체 |
| **동전 던지기** | 제약 | 코인 수 기반 스킬 필터링 |
| **행선지 시스템** | 의존 | 상점 등장 확률 및 조건 결정 |

### 3.2 검증 기준

**구현 완료 기준:**
- [ ] 행선지에서 상점 선택 시 상점 화면이 표시된다
- [ ] 스킬 5개, 전리품 3개, 슬롯 확장이 한 화면에 진열된다
- [ ] 각 상품에 가격(영혼)과 상세 정보가 표시된다
- [ ] 우클릭 시 구매 확인 팝업이 동작한다
- [ ] 구매 시 영혼이 차감되고 상품이 획득된다
- [ ] 스킬 구매 후 보상과 동일한 슬롯 배치 흐름이 동작한다
- [ ] 영혼 부족 시 구매 불가 표시가 된다
- [ ] 복수 구매가 가능하다
- [ ] 슬롯 6개일 때 슬롯 확장이 표시되지 않는다
- [ ] 방문할 때마다 새로운 상품이 생성된다

**플레이 테스트 기준:**
- [ ] 상점에서 구매 고민이 발생한다 (즉시 구매 vs 영혼 절약)
- [ ] 상점 방문이 전투 사이 분위기 전환으로 체감된다
- [ ] 상점 없이도 게임 클리어가 가능하다 (상점 의존도 적절)
- [ ] 상점 체류 시간이 과도하지 않다 (1~2분 이내)

### 3.3 참고 사례

> 보류 - 추후 작성

---

*작성일: 2026-02-10*
