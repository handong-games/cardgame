# 프롬프트 처리 규칙

Claude 에이전트가 사용자 요청을 처리할 때 따르는 규칙입니다.

---

## 핵심 원칙: 문서 주도 개발

**모든 코드 작업은 문서를 먼저 수정한 후 진행합니다.**

```
사용자 요청
     ↓
[Step 1] doc-index.md에서 관련 문서 검색
     ↓
[Step 2] 관련 문서 먼저 수정 (설계)
     ↓
[Step 3] 문서 기반으로 코드 구현
     ↓
[Step 4] /update-doc로 동기화 확인
```

---

## 1. 요청 처리 워크플로우

### Step 1: 문서 인덱스 검색
사용자 요청에서 키워드를 추출하여 `doc-index.md`에서 관련 문서를 찾습니다.

**예시:**
```
요청: "체력바 위치 변경해줘"
     ↓
키워드: "체력바"
     ↓
doc-index.md 검색 → ui-ux.md #체력바
```

### Step 2: 문서 먼저 수정
찾은 문서의 해당 섹션을 먼저 수정합니다.
- 변경할 내용을 문서에 기록
- 설계 의도 명확화

### Step 3: 코드 구현
수정된 문서를 기반으로 코드를 구현합니다.
- 문서의 스펙대로 구현
- 문서와 코드 일관성 유지

### Step 4: 동기화 확인
`/update-doc` 명령어로 문서와 코드가 일치하는지 확인합니다.

## 2. /update-doc 명령어

### 용도
- 작업 완료 후 문서 동기화 확인
- 누락된 문서 업데이트 감지
- 레지스트리 일관성 검증

### 상세
`.claude/commands/update-doc.md` 참조

---

## 3. 토큰 최적화

### 문서 로딩 순서
| 순서 | 대상 | 용도 |
|:----:|------|------|
| 1 | doc-index.md | 관련 문서 빠른 검색 |
| 2 | 해당 문서만 | 실제 작업 대상 |

### 규칙
- 전체 문서 로딩 금지
- 필요한 섹션만 읽기
- git 명령어로 변경 감지

---

## 참조 문서

| 문서 | 용도 |
|------|------|
| `doc-index.md` | 문서 인덱스 (레지스트리) |
